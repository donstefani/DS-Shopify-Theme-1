{% comment %}
  Featured Collection Section
  Displays a set number of products from a selected collection
{% endcomment %}

<section class="featured-collection container py-12" style="padding-top: 5rem;">
  {% if section.settings.heading != blank %}
    <h2 class="text-3xl font-bold text-gray-900 mb-8 text-center">{{ section.settings.heading }}</h2>
  {% endif %}

  {% assign collection = section.settings.collection %}

  {% if collection and collection.products_count > 0 %}
    <div class="product-grid">
      {% for product in collection.products limit: section.settings.products_to_show %}
        <div class="product-card">
          <a href="{{ product.url }}" class="block">
            {% assign product_handle = product.handle %}
            
            {% if product.featured_image %}
              <img
                src="{{ product.featured_image | image_url: '400x' }}"
                alt="{{ product.featured_image.alt | escape }}"
                class="product-card-image"
                width="400"
                height="400"
              >
            {% else %}
              {% comment %}
                This is a fallback for when the product has no images.
                I hadn't added images to the products on Shopify product catalog
              {% endcomment %}
              {% if product_handle == 'ocean-blue-shirt' %}
                <img src="{{ 'ocean-blue-shirt.jpg' | asset_url }}" alt="{{ product.title | escape }}" class="product-card-image" width="400" height="400">
              {% elsif product_handle == 'chequered-red-shirt' %}
                <img src="{{ 'chequered-red-shirt.jpg' | asset_url }}" alt="{{ product.title | escape }}" class="product-card-image" width="400" height="400">
              {% elsif product_handle == 'white-cotton-shirt' %}
                <img src="{{ 'white-cotton-shirt.jpg' | asset_url }}" alt="{{ product.title | escape }}" class="product-card-image" width="400" height="400">
              {% elsif product_handle == 'red-sports-tee' %}
                <img src="{{ 'red-sports-tee.jpg' | asset_url }}" alt="{{ product.title | escape }}" class="product-card-image" width="400" height="400">
              {% elsif product_handle == 'classic-varsity-top' %}
                <img src="{{ 'classic-varsity-top.jpg' | asset_url }}" alt="{{ product.title | escape }}" class="product-card-image" width="400" height="400">
              {% elsif product_handle == 'long-sleeve-cotton-top' %}
                <img src="{{ 'long-sleeve-cotton-top.jpg' | asset_url }}" alt="{{ product.title | escape }}" class="product-card-image" width="400" height="400">
              {% elsif product_handle == 'blue-silk-tuxedo' %}
                <img src="{{ 'blue-silk-tuxedo.jpg' | asset_url }}" alt="{{ product.title | escape }}" class="product-card-image" width="400" height="400">
              {% elsif product_handle == 'yellow-wool-jumper' %}
                <img src="{{ 'yellow-wool-jumper.jpg' | asset_url }}" alt="{{ product.title | escape }}" class="product-card-image" width="400" height="400">
              {% elsif product_handle == 'striped-silk-blouse' %}
                <img src="{{ 'striped-silk-blouse.jpg' | asset_url }}" alt="{{ product.title | escape }}" class="product-card-image" width="400" height="400">
              {% else %}
                <img
                  src="{{ 'no-image.png' | asset_url }}"
                  alt="No product image available"
                  class="product-card-image"
                  width="200"
                  height="200"
                >
              {% endif %}
            {% endif %}

            <h3 class="product-card-title">{{ product.title }}</h3>

            <div class="product-card-price">
              {{ product.price | money }}
              {% if product.compare_at_price > product.price %}
                <span class="product-card-compare">
                  <s>{{ product.compare_at_price | money }}</s>
                </span>
              {% endif %}
            </div>
          </a>
        </div>
      {% endfor %}
    </div>
  {% else %}
    <p class="text-center text-gray-600 py-8">
      {% if collection %}
        No products found in the <strong>{{ collection.title }}</strong> collection.
      {% else %}
        No collection selected or collection not found.
      {% endif %}
    </p>
  {% endif %}
</section>

{% schema %}
{
  "name": "Featured Collection",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Featured Collection"
    },
    {
      "type": "collection",
      "id": "collection",
      "label": "Collection"
    },
    {
      "type": "range",
      "id": "products_to_show",
      "label": "Products to show",
      "min": 2,
      "max": 12,
      "step": 1,
      "default": 4
    }
  ],
  "presets": [
    {
      "name": "Featured Collection"
    }
  ]
}
{% endschema %}
